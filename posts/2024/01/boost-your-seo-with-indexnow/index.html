<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>使用IndexNow提升Github Pages网站SEO | 阿不的技术博客</title>
<meta name="keywords" content="Cloudflare, Github Pages, SEO, IndexNow">
<meta name="description" content="Learn how to optimize SEO for your Github Pages site by using IndexNow. From understanding the purpose of SEO to detailed steps on applying IndexNow, enhance your website visibility efficiently!">
<meta name="author" content="路边的阿不">
<link rel="canonical" href="https://babyno.top/posts/2024/01/boost-your-seo-with-indexnow/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.12891501283130addd65d5c9aa3af45b949edff3f949a53c8f890319a805b26b.css" integrity="sha256-EokVASgxMK3dZdXJqjr0W5Se3/P5SaU8j4kDGagFsms=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://babyno.top/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://babyno.top/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://babyno.top/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://babyno.top/apple-touch-icon.png">
<link rel="mask-icon" href="https://babyno.top/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="使用IndexNow提升Github Pages网站SEO" />
<meta property="og:description" content="Learn how to optimize SEO for your Github Pages site by using IndexNow. From understanding the purpose of SEO to detailed steps on applying IndexNow, enhance your website visibility efficiently!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://babyno.top/posts/2024/01/boost-your-seo-with-indexnow/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-17T14:42:30+00:00" />
<meta property="article:modified_time" content="2024-01-17T14:42:30+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="使用IndexNow提升Github Pages网站SEO"/>
<meta name="twitter:description" content="Learn how to optimize SEO for your Github Pages site by using IndexNow. From understanding the purpose of SEO to detailed steps on applying IndexNow, enhance your website visibility efficiently!"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://babyno.top/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "使用IndexNow提升Github Pages网站SEO",
      "item": "https://babyno.top/posts/2024/01/boost-your-seo-with-indexnow/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "使用IndexNow提升Github Pages网站SEO",
  "name": "使用IndexNow提升Github Pages网站SEO",
  "description": "Learn how to optimize SEO for your Github Pages site by using IndexNow. From understanding the purpose of SEO to detailed steps on applying IndexNow, enhance your website visibility efficiently!",
  "keywords": [
    "Cloudflare", "Github Pages", "SEO", "IndexNow"
  ],
  "articleBody": "我之前写过一篇文章，介绍了本站是使用Hugo进行构建并发布在Github Pages上的。也向大家介绍过将网站提交给搜索引擎的方法，但是手工提交未免繁琐和低效。今天给大家介绍下如何通过IndexNow 对网站进行SEO优化。\nSEO的作用 搜索引擎优化 (SEO) 对于网站的重要性无法忽视。如果你想让你的网站获得更多的曝光，那么你需要理解 SEO 的作用，以及它是如何帮助你获得更高的搜索引擎排名的。以下是使用 SEO 的 5 大理由：\n提高可见性 提高网站流量 提供用户友好的体验 建立信任和信誉 获得竞争优势 IndexNow介绍 IndexNow是一个开源协议，由微软提出并开发。它使网站无论是新增页面，更新页面或删除页面，发布者都可以使用 IndexNow 协议将这些更新快速推送至搜索引擎。\n对于 SEO，IndexNow 有着直接的影响。使用 IndexNow 的网站可以使其内容更快地呈现在搜索结果中，从而提高网站的 SEO 排名。由于搜索结果的新鲜度是影响 SEO 的一个重要因素，因此 IndexNow 的使用对于 SEO 而言具有重大价值。\n另一个巨大优势在于：支持 IndexNow 协议的搜索引擎会立即共享数据至其它的搜索引擎，因此您只需通知其中一个搜索引擎即可。目前支持的搜索引擎有：Bing，Naver，Seznam.cz，Yandex。\n接入准备 访问https://www.bing.com/indexnow，上面给出了接入步骤分为4步：\nGenerate API Key Host API key Submit URLs with parameters Get details on how many submitted 实际上准备工作就是上面的步骤1和步骤2。在上面的网站上生成一个API Key （按钮1），下载API Key文件（按钮2），最后将文本文件放置在你的网站根目录下。\nIndexNow Implementation Steps\n这样准备工作就完成了。\n利用Github Actions自动提交 由于我的网站是通过Hugo 在本地生成静态页面，然后推送到仓库，通过Guthub Actions部署到Github Pages上的，因此我这里做了如下改动：\n写了一个python脚本，读取sitemap里最近更新的10篇文章的url。构建一个POST请求，将url提交给IndexNow。 新增加一个workflow ，在代码推送至仓库时，调用上面这个python脚本。 代码参考：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 def get_latest_posts(sitemap_path, n=10): # Parse the XML sitemap. tree = ET.parse(sitemap_path) root = tree.getroot() # Namespace dictionary to find the 'loc' and 'lastmod' tags. namespaces = {'s': 'http://www.sitemaps.org/schemas/sitemap/0.9'} # Get all URLs. urls = [(url.find('s:loc', namespaces).text, url.find('s:lastmod', namespaces).text) for url in root.findall('s:url', namespaces) if \"/posts/2\" in url.find('s:loc', namespaces).text] # Sort URLs by the lastmod tag (in descending order), hence most recent pages come first. urls.sort(key=lambda x: x[1], reverse=True) # Return the n most recent URLs. return [url[0] for url in urls[:n]] def ping_bing(url_list): # Prepare the URL and headers. url = 'https://www.bing.com/indexnow' headers = { 'Content-Type': 'application/json; charset=utf-8', } # Prepare the body data. data = { \"host\": HOST, \"key\": KEY, \"keyLocation\": f\"https://{HOST}/{KEY}.txt\", \"urlList\": url_list } # Send the POST request. response = requests.post(url, headers=headers, json=data) return response if __name__ == \"__main__\": sitemap_path = \"../sitemap.xml\" url_list = get_latest_posts(sitemap_path, 9) url_list.insert(0, f'https://{HOST}/') print(url_list) response = ping_bing(url_list) # Print the response. print(response.status_code) print(response.text) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 # Simple workflow for deploying static content to GitHub Pages name: Submit IndexNow Request To Bing on: # Runs on pushes targeting the default branch push: branches: [\"main\"] # Allows you to run this workflow manually from the Actions tab workflow_dispatch: jobs: indexnow: name: IndexNow runs-on: ubuntu-latest steps: - name: Checkout repository uses: actions/checkout@v4 - name: Set up Python uses: actions/setup-python@v5 with: python-version: 3.11 - name: Install dependencies run: | python -m pip install --upgrade pip pip install requests - name: Run script run: | cd .github python ping_bing.py 最后查看下效果，登录Bing Webmaster Tools，选择左边菜单栏的IndexNow：\nIndexNow on Bing Webmaster Tools\n使用 Cloudflare 集成 IndexNow Cloudflare已经集成了IndexNow，https://blog.cloudflare.com/cloudflare-now-supports-indexnow。所以如果你的网站是托管在Cloudflare上的，可以直接在控制台里设置。这个功能免费用户可用。\nSign in to your Cloudflare Account. In the dashboard, navigate to the Cache tab. Click on the Configuration section. Locate the Crawler Hints sign up card and enable. It’s that easy. Cloudflare Crawler Hints\n但是有个奇怪的地方，我没有用Cloudflare Pages进行网站托管，仅仅使用了它的DNS解析，开启Crawler Hints后，效果很差。它并不能将我的文章url准确推送给IndexNow，相反推送的是一些图片和txt文件。\n",
  "wordCount" : "1514",
  "inLanguage": "en",
  "datePublished": "2024-01-17T14:42:30Z",
  "dateModified": "2024-01-17T14:42:30Z",
  "author":{
    "@type": "Person",
    "name": "路边的阿不"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://babyno.top/posts/2024/01/boost-your-seo-with-indexnow/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "阿不的技术博客",
    "logo": {
      "@type": "ImageObject",
      "url": "https://babyno.top/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://babyno.top/" accesskey="h" title="阿不的技术博客 (Alt + H)">阿不的技术博客</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://babyno.top/archive/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://babyno.top/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://babyno.top/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://babyno.top/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://3shi.babyno.top" title="3shi天下">
                    <span>3shi天下</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://babyno.top/">Home</a>&nbsp;»&nbsp;<a href="https://babyno.top/posts/">Posts</a></div>
    <h1 class="post-title">
      使用IndexNow提升Github Pages网站SEO
    </h1>
    <div class="post-description">
      Learn how to optimize SEO for your Github Pages site by using IndexNow. From understanding the purpose of SEO to detailed steps on applying IndexNow, enhance your website visibility efficiently!
    </div>
    <div class="post-meta"><span title='2024-01-17 14:42:30 +0000 UTC'>2024-01-17</span>&nbsp;·&nbsp;路边的阿不

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#seo%e7%9a%84%e4%bd%9c%e7%94%a8" aria-label="SEO的作用">SEO的作用</a></li>
                    <li>
                        <a href="#indexnow%e4%bb%8b%e7%bb%8d" aria-label="IndexNow介绍">IndexNow介绍</a></li>
                    <li>
                        <a href="#%e6%8e%a5%e5%85%a5%e5%87%86%e5%a4%87" aria-label="接入准备">接入准备</a></li>
                    <li>
                        <a href="#%e5%88%a9%e7%94%a8github-actions%e8%87%aa%e5%8a%a8%e6%8f%90%e4%ba%a4" aria-label="利用Github Actions自动提交">利用Github Actions自动提交</a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8-cloudflare-%e9%9b%86%e6%88%90-indexnow" aria-label="使用 Cloudflare 集成 IndexNow"><strong><strong>使用 Cloudflare 集成 IndexNow</strong></strong></a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><p>我之前写过<a href="https://babyno.top/posts/2023/11/new-hugo-blog/">一篇文章</a>，介绍了<a href="https://babyno.top/">本站</a>是使用<code>Hugo</code>进行构建并发布在<code>Github Pages</code>上的。也向大家介绍过将网站提交给搜索引擎的方法，但是手工提交未免繁琐和低效。今天给大家介绍下如何通过<code>IndexNow</code> 对网站进行<code>SEO</code>优化。</p>
<h2 id="seo的作用">SEO的作用<a hidden class="anchor" aria-hidden="true" href="#seo的作用">#</a></h2>
<p><strong>搜索引擎优化 (SEO)</strong> 对于网站的重要性无法忽视。如果你想让你的网站获得更多的曝光，那么你需要理解 <code>SEO</code> 的作用，以及它是如何帮助你获得更高的搜索引擎排名的。以下是使用 <code>SEO</code> 的 5 大理由：</p>
<ol>
<li>提高可见性</li>
<li>提高网站流量</li>
<li>提供用户友好的体验</li>
<li>建立信任和信誉</li>
<li>获得竞争优势</li>
</ol>
<h2 id="indexnow介绍">IndexNow介绍<a hidden class="anchor" aria-hidden="true" href="#indexnow介绍">#</a></h2>
<p><code>IndexNow</code>是一个开源协议，由微软提出并开发。它使网站无论是新增页面，更新页面或删除页面，发布者都可以使用 <code>IndexNow</code> 协议将这些更新快速推送至搜索引擎。</p>
<p>对于 <code>SEO</code>，<code>IndexNow</code> 有着直接的影响。使用 <code>IndexNow</code> 的网站可以使其内容更快地呈现在搜索结果中，从而提高网站的 <code>SEO</code> 排名。由于搜索结果的新鲜度是影响 <code>SEO</code> 的一个重要因素，因此 <code>IndexNow</code> 的使用对于 <code>SEO</code> 而言具有重大价值。</p>
<p>另一个巨大优势在于：支持 <code>IndexNow</code> 协议的搜索引擎会立即共享数据至其它的搜索引擎，因此您只需通知其中一个搜索引擎即可。目前支持的搜索引擎有：<code>Bing</code>，<code>Naver</code>，<code>Seznam.cz</code>，<code>Yandex</code>。</p>
<h2 id="接入准备">接入准备<a hidden class="anchor" aria-hidden="true" href="#接入准备">#</a></h2>
<p>访问<a href="https://www.bing.com/indexnow">https://www.bing.com/indexnow</a>，上面给出了接入步骤分为4步：</p>
<ul>
<li>Generate API Key</li>
<li>Host API key</li>
<li>Submit URLs with parameters</li>
<li>Get details on how many submitted</li>
</ul>
<p>实际上准备工作就是上面的步骤1和步骤2。在上面的网站上生成一个<code>API Key</code> （按钮1），下载<code>API Key</code>文件（按钮2），最后将文本文件放置在你的网站根目录下。</p>
<p><a href="/imgs/posts/2024-01-17-boost-your-seo-with-indexnow/Untitled.webp"  data-lightbox="image-1" >
<img loading="lazy" src="/imgs/posts/2024-01-17-boost-your-seo-with-indexnow/Untitled.webp" alt="IndexNow Implementation Steps"  />
</a></p>
<p>IndexNow Implementation Steps</p>
<p>这样准备工作就完成了。</p>
<h2 id="利用github-actions自动提交">利用Github Actions自动提交<a hidden class="anchor" aria-hidden="true" href="#利用github-actions自动提交">#</a></h2>
<p>由于我的网站是通过<code>Hugo</code> 在本地生成静态页面，然后推送到仓库，通过<code>Guthub Actions</code>部署到<code>Github Pages</code>上的，因此我这里做了如下改动：</p>
<ul>
<li>写了一个<code>python</code>脚本，读取<code>sitemap</code>里最近更新的10篇文章的<code>url</code>。构建一个<code>POST</code>请求，将<code>url</code>提交给<code>IndexNow</code>。</li>
<li>新增加一个<code>workflow</code> ，在代码推送至仓库时，调用上面这个<code>python</code>脚本。</li>
</ul>
<p>代码参考：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_latest_posts</span><span class="p">(</span><span class="n">sitemap_path</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Parse the XML sitemap.</span>
</span></span><span class="line"><span class="cl">    <span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">sitemap_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Namespace dictionary to find the &#39;loc&#39; and &#39;lastmod&#39; tags.</span>
</span></span><span class="line"><span class="cl">    <span class="n">namespaces</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="s1">&#39;http://www.sitemaps.org/schemas/sitemap/0.9&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Get all URLs.</span>
</span></span><span class="line"><span class="cl">    <span class="n">urls</span> <span class="o">=</span> <span class="p">[(</span><span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;s:loc&#39;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;s:lastmod&#39;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;s:url&#39;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="s2">&#34;/posts/2&#34;</span> <span class="ow">in</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;s:loc&#39;</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Sort URLs by the lastmod tag (in descending order), hence most recent pages come first.</span>
</span></span><span class="line"><span class="cl">    <span class="n">urls</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Return the n most recent URLs.</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">[</span><span class="n">url</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">[:</span><span class="n">n</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">ping_bing</span><span class="p">(</span><span class="n">url_list</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Prepare the URL and headers.</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.bing.com/indexnow&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json; charset=utf-8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Prepare the body data.</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;host&#34;</span><span class="p">:</span> <span class="n">HOST</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;key&#34;</span><span class="p">:</span> <span class="n">KEY</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;keyLocation&#34;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&#34;https://</span><span class="si">{</span><span class="n">HOST</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">KEY</span><span class="si">}</span><span class="s2">.txt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;urlList&#34;</span><span class="p">:</span> <span class="n">url_list</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Send the POST request.</span>
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">response</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">sitemap_path</span> <span class="o">=</span> <span class="s2">&#34;../sitemap.xml&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">url_list</span> <span class="o">=</span> <span class="n">get_latest_posts</span><span class="p">(</span><span class="n">sitemap_path</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">url_list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;https://</span><span class="si">{</span><span class="n">HOST</span><span class="si">}</span><span class="s1">/&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">url_list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">ping_bing</span><span class="p">(</span><span class="n">url_list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Print the response.</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># Simple workflow for deploying static content to GitHub Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Submit IndexNow Request To Bing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Runs on pushes targeting the default branch</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">push</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;main&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Allows you to run this workflow manually from the Actions tab</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">indexnow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">IndexNow</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Checkout repository</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Set up Python</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/setup-python@v5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="m">3.11</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install dependencies</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          python -m pip install --upgrade pip
</span></span></span><span class="line"><span class="cl"><span class="sd">          pip install requests</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Run script</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          cd .github
</span></span></span><span class="line"><span class="cl"><span class="sd">          python ping_bing.py</span><span class="w">          
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>最后查看下效果，登录<a href="https://www.bing.com/webmasters/indexnow">Bing Webmaster Tools</a>，选择左边菜单栏的<code>IndexNow</code>：</p>
<p><a href="/imgs/posts/2024-01-17-boost-your-seo-with-indexnow/Untitled%201.webp"  data-lightbox="image-1" >
<img loading="lazy" src="/imgs/posts/2024-01-17-boost-your-seo-with-indexnow/Untitled%201.webp" alt="IndexNow on Bing Webmaster Tools"  />
</a></p>
<p>IndexNow on Bing Webmaster Tools</p>
<h2 id="使用-cloudflare-集成-indexnow"><strong><strong>使用 Cloudflare 集成 IndexNow</strong></strong><a hidden class="anchor" aria-hidden="true" href="#使用-cloudflare-集成-indexnow">#</a></h2>
<p><code>Cloudflare</code>已经集成了<code>IndexNow</code>，<a href="https://blog.cloudflare.com/cloudflare-now-supports-indexnow">https://blog.cloudflare.com/cloudflare-now-supports-indexnow</a>。所以如果你的网站是托管在<code>Cloudflare</code>上的，可以直接在控制台里设置。这个功能免费用户可用。</p>
<ol>
<li>Sign in to your Cloudflare Account.</li>
<li>In the dashboard, navigate to the <strong>Cache tab.</strong></li>
<li>Click on the <strong>Configuration</strong> section.</li>
<li>Locate the Crawler Hints sign up card and enable. It&rsquo;s that easy.</li>
</ol>
<p><a href="/imgs/posts/2024-01-17-boost-your-seo-with-indexnow/Untitled%202.webp"  data-lightbox="image-1" >
<img loading="lazy" src="/imgs/posts/2024-01-17-boost-your-seo-with-indexnow/Untitled%202.webp" alt="Cloudflare Crawler Hints"  />
</a></p>
<p>Cloudflare Crawler Hints</p>
<p>但是有个奇怪的地方，我没有用<code>Cloudflare Pages</code>进行网站托管，仅仅使用了它的<code>DNS</code>解析，开启<code>Crawler Hints</code>后，效果很差。它并不能将我的文章<code>url</code>准确推送给<code>IndexNow</code>，相反推送的是一些图片和<code>txt</code>文件。</p>


  </div>

  

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://babyno.top/tags/cloudflare/">Cloudflare</a></li>
      <li><a href="https://babyno.top/tags/github-pages/">Github Pages</a></li>
      <li><a href="https://babyno.top/tags/seo/">SEO</a></li>
      <li><a href="https://babyno.top/tags/indexnow/">IndexNow</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://babyno.top/posts/2024/01/two-subsequent-reflections-upon-perusal/">
    <span class="title">Next »</span>
    <br>
    <span>读后感两篇</span>
  </a>
</nav>

  </footer><link
rel="stylesheet"
href="/assets/@waline/client/dist/waline.css"
/>
<div id="waline"></div>
<script type="module">
  import { init } from '/assets/@waline/client/dist/waline.mjs';

  init({
    el: '#waline',
    serverURL: 'https://comments.babyno.top/',
    search: false
  });
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://babyno.top/">阿不的技术博客</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?3538691f85f2d2e74e734e6ad2c07251";
    var s = document.getElementsByTagName("script");
    var lastScript = s[s.length - 1];
    if (lastScript.nextSibling) {
      lastScript.parentNode.insertBefore(hm, lastScript.nextSibling);
    } else {
      lastScript.parentNode.appendChild(hm);
    }
  })();
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-GS1HVS967Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-GS1HVS967Y');
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
